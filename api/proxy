module.exports = async function (req, res) {
  const backend = "https://gsa.ayanakojivps.shop/h9HPGjpKOYLFwrODUhgn"; // Your V2Ray backend

  try {
    const response = await fetch(backend, {
      method: req.method,
      headers: req.headers,
      body: req.method === "GET" ? undefined : req.body
    });

    const buffer = await response.arrayBuffer();

    res.status(response.status);
    response.headers.forEach((v, k) => res.setHeader(k, v));
    res.send(Buffer.from(buffer));
  } catch (err) {
    console.error("Proxy error:", err);
    res.status(500).send("Internal Server Error");
  }
};
